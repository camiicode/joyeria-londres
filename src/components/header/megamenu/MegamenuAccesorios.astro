<section id="jl-mm-content-1" class="jl-mm-content">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-12 jl-mm-content__list--item-preview d-none d-md-block">
        <a href="/shop/category/150">
          <img src="/web/image/403984/timeline-01.jpg" alt="hover-item-link" class="img img-fluid w-100" style="height: 250px; object-fit: cover;">
        </a>
      </div>
      <div class="col-md-3 col-12 text-left">
        <ul dir="ltr" role="navigation" class="jl-mm-content__list jl-mm-content__list-row px-3 pt-3 py-md-3 pt-md-0">
          <li class="jl-mm-content__list--item-category">
            <a class="jl-mm-content__list--item-link" href="/shop/category/152" data-target-image="/web/image/304412/IMG_3991.PNG">
              <span>Anillos</span>
            </a>

            <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory">
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/155" data-target-image="/web/image/product.template/2803/image_512">
                  <span>Mujer</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/152" data-target-image="/web/image/product.template/3033/image_512">
                  <span>Hombre</span>
                </a>
              </li>
            </ul>

          </li>

          <li class="jl-mm-content__list--item-category">
            <a class="jl-mm-content__list--item-link" href="/shop/category/153" data-target-image="/web/image/16775/pulseras.jpg">
              <span>Pulseras y Manillas</span>
            </a>

            <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory">
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/168" data-target-image="/web/image/product.template/25570/image_512">
                  <span>Mujer</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/153" data-target-image="/web/image/product.template/25709/image_512">
                  <span>Hombre</span>
                </a>
              </li>
            </ul>

          </li>
          
        </ul>
      </div>
      <div class="col-md-3 col-12 text-left">
        <ul dir="ltr" role="navigation" class="jl-mm-content__list jl-mm-content__list-row px-3 pb-3 py-md-3 pn-md-0">
          
          <li class="jl-mm-content__list--item-category">
            <a class="jl-mm-content__list--item-link" href="/shop/category/151" data-target-image="/web/image/190617/cadenas%20%28Custom%29.jpg">
              <span>Cadenas</span>

              <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory">
                <li class="jl-mm-content__list--item-target">
                  <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/151" data-target-image="/web/image/product.template/6352/image_512">
                    <span>40cm  - 70cm</span>
                  </a>
                </li>
              </ul>
            </a>
          </li>

          <li class="jl-mm-content__list--item-category">                              
            <a class="jl-mm-content__list--item-link" href="/shop/category/157" data-target-image="/web/image/product.template/6523/image_512">
              <span>Pendientes</span>
            </a>

            <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory">
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/156" data-target-image="/web/image/product.template/6352/image_512">
                  <span>Aretes</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/159" data-target-image="/web/image/product.template/11168/image_512">
                  <span>Candongas</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/154" data-target-image="/web/image/product.template/34873/image_512">
                  <span>Piercings</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-1" href="/shop/category/162" data-target-image="/web/image/product.template/6546/image_512">
                  <span>Topos</span>
                </a>
              </li>
            </ul>

          </li> 
          
        </ul>
      </div>
      
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Selecciona todos los megamenús
      const megaMenus = document.querySelectorAll('.jl-mm-content');

      megaMenus.forEach(megaMenu => {
        // Encuentra elementos dentro de cada megamenú
        const hoverLinks = megaMenu.querySelectorAll('[data-target-image]');
        const previewImage = megaMenu.querySelector('.jl-mm-content__list--item-preview img');
        const previewParagraph = megaMenu.querySelector('.jl-mm-content__list--item-preview p');
        const previewContainer = megaMenu.querySelector('.jl-mm-content__list--item-preview');

        // Almacenar valores originales
        const originalSrc = previewImage ? previewImage.src : '';
        const originalText = previewParagraph ? previewParagraph.textContent : '';

        // Detectar la altura máxima de los UL cuando se abra el megamenú
        megaMenu.addEventListener('mouseenter', function () {
          const lists = megaMenu.querySelectorAll('ul');
          let maxHeight = 0;

          // Calcular la altura máxima entre todos los <ul>
          lists.forEach(list => {
            const listHeight = list.scrollHeight;
            if (listHeight > maxHeight) {
              maxHeight = listHeight;
            }
          });

          // Asignar la altura máxima a una variable de CSS
          megaMenu.style.setProperty('--max-ul-height', `${maxHeight}px`);
        });

        hoverLinks.forEach(link => {
          link.addEventListener('mouseover', function () {
            const newSrc = link.getAttribute('data-target-image');
            const newText = link.querySelector('span').textContent;

            // Cambiar SRC de la imagen y el texto del párrafo
            if (previewImage) {
              previewImage.src = newSrc;
            }
            if (previewParagraph) {
              previewParagraph.textContent = newText;
            }

            // Agregar la clase hover al contenedor
            if (previewContainer) {
              previewContainer.classList.add('jl-mm-content__list--item-preview_hover');
            }
          });

          link.addEventListener('mouseout', function () {
            // Restaurar valores originales
            if (previewImage) {
              previewImage.src = originalSrc;
            }
            if (previewParagraph) {
              previewParagraph.textContent = originalText;
            }

            // Remover la clase hover del contenedor
            if (previewContainer) {
              previewContainer.classList.remove('jl-mm-content__list--item-preview_hover');
            }
          });
        });
      });
    });
  </script>
</section>