<section id="jl-mm-content-1" class="jl-mm-content">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-12 jl-mm-content__list--item-preview d-none d-md-block">
        <a href="#">
          <img src="https://pruebas.joyerialondres.com/web/image/423442/portada-black-friday.jpg" alt="hover-item-link" class="img img-fluid w-100" style="height: 250px; object-fit: cover;">
        </a>
      </div>
      <div class="col-md col-12">
        <ul dir="ltr" role="navigation" class="jl-mm-content__list jl-mm-content__list-row px-3 py-md-3">
          <li class="jl-mm-content__list--item-category">
            <a class="jl-mm-content__list--item-link" data-target-image="https://pruebas.joyerialondres.com/web/image/423438/portada.jpg">
              <span>Masculino</span>
            </a>

            <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory">
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink" href="/shop/category/relojeria-relojes-de-pulso-caravelle-reloj-caravelle-hombre-63" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/17993/image_512">
                  <span>Bulova</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-casio-reloj-casio-hombre-61" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/1890/image_512">
                  <span>Casio</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-dmario-reloj-d-mario-hombre-65" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/13349/image_512">
                  <span>D'Mario</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-orient-reloj-orient-hombre-74" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/17993/image_512">
                  <span>Orient</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-q-q-reloj-q-q-hombre-75" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/3461/image_512">
                  <span>Q&Q</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-tempus-reloj-tempus-hombre-77" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/27903/image_512">
                  <span>Tempus</span>
                </a>
              </li>
            </ul>

          </li>
        </ul>
      </div>
      <div class="col-md col-12">
        <ul dir="ltr" role="navigation" class="jl-mm-content__list jl-mm-content__list-row px-2 py-md-3">
          <li class="jl-mm-content__list--item-category">
            <a class="jl-mm-content__list--item-link" data-target-image="https://pruebas.joyerialondres.com/web/image/423439/femenina.jpg">
              <span>Femenino</span>
            </a>

            <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory">
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/17993/image_512">
                  <span>Bulova</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-casio-reloj-casio-mujer-80" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/1890/image_512">
                  <span>Casio</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-dmario-reloj-d-mario-mujer-84" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/13349/image_512">
                  <span>D'Mario</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-orient-reloj-orient-mujer-93" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/17993/image_512">
                  <span>Orient</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-q-q-reloj-q-q-mujer-94" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/3461/image_512">
                  <span>Q&Q</span>
                </a>
              </li>
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pulso-tempus-reloj-tempus-mujer-96" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/27903/image_512">
                  <span>Tempus</span>
                </a>
              </li>
            </ul>

          </li>
        </ul>
      </div>
      <div class="col-md col-12">
        <ul dir="ltr" role="navigation" class="jl-mm-content__list jl-mm-content__list-row px-3 py-md-3">
          <li class="jl-mm-content__list--item-category">
            <a class="jl-mm-content__list--item-link" data-target-image="https://pruebas.joyerialondres.com/web/image/423443/hogar.jpg">
              <span>Hogar</span>
            </a>

            <ul dir="ltr" role="navigation" class="jl-mm-content__list--item-subcategory px-2">
              <li class="jl-mm-content__list--item-target">
                <a class="jl-mm-content__list--item-sublink p-2 p-md-0" href="/shop/category/relojeria-relojes-de-pared-relojes-de-pared-casio-99" data-target-image="https://pruebas.joyerialondres.com/web/image/product.template/19160/image_512">
                  <span>Casio</span>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Selecciona todos los megamenús
      const megaMenus = document.querySelectorAll('.jl-mm-content');

      megaMenus.forEach(megaMenu => {
        // Encuentra elementos dentro de cada megamenú
        const hoverLinks = megaMenu.querySelectorAll('[data-target-image]');
        const previewImage = megaMenu.querySelector('.jl-mm-content__list--item-preview img');
        const previewParagraph = megaMenu.querySelector('.jl-mm-content__list--item-preview p');
        const previewContainer = megaMenu.querySelector('.jl-mm-content__list--item-preview');

        // Almacenar valores originales
        const originalSrc = previewImage ? previewImage.src : '';
        const originalText = previewParagraph ? previewParagraph.textContent : '';

        // Detectar la altura máxima de los UL cuando se abra el megamenú
        megaMenu.addEventListener('mouseenter', function () {
          const lists = megaMenu.querySelectorAll('ul');
          let maxHeight = 0;

          // Calcular la altura máxima entre todos los <ul>
          lists.forEach(list => {
            const listHeight = list.scrollHeight;
            if (listHeight > maxHeight) {
              maxHeight = listHeight;
            }
          });

          // Asignar la altura máxima a una variable de CSS
          megaMenu.style.setProperty('--max-ul-height', `${maxHeight}px`);
        });

        hoverLinks.forEach(link => {
          link.addEventListener('mouseover', function () {
            const newSrc = link.getAttribute('data-target-image');
            const newText = link.querySelector('span').textContent;

            // Cambiar SRC de la imagen y el texto del párrafo
            if (previewImage) {
              previewImage.src = newSrc;
            }
            if (previewParagraph) {
              previewParagraph.textContent = newText;
            }

            // Agregar la clase hover al contenedor
            if (previewContainer) {
              previewContainer.classList.add('jl-mm-content__list--item-preview_hover');
            }
          });

          link.addEventListener('mouseout', function () {
            // Restaurar valores originales
            if (previewImage) {
              previewImage.src = originalSrc;
            }
            if (previewParagraph) {
              previewParagraph.textContent = originalText;
            }

            // Remover la clase hover del contenedor
            if (previewContainer) {
              previewContainer.classList.remove('jl-mm-content__list--item-preview_hover');
            }
          });
        });
      });
    });
  </script>
</section>